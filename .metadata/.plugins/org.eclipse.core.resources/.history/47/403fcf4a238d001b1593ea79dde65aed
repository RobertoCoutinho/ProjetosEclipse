package cliente;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.Socket;
import java.net.SocketException;
import java.net.UnknownHostException;

public class UDPlient {
	
	DatagramSocket aSocket = null;
	InetAddress aHost;
	int serverPort;

	public UDPlient(String serverIP, int port) {
			try {
				aSocket = new DatagramSocket();
				aHost = InetAddress.getByName(serverIP);
				serverPort = port;
			} catch (SocketException | UnknownHostException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
			
	}

	public void sendRequest(byte[] requisicao) {
		
		byte[] m = requisicao;
		DatagramPacket request = new DatagramPacket(m, 1000, aHost, serverPort);
		try {
			aSocket.send(request);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}

	}

	public byte[] getReplay() {
		byte[] buffer = new byte[1000];
		DatagramPacket reply = new DatagramPacket(buffer, buffer.length);
		try {
			aSocket.receive(reply);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return buffer;
	}

	public void finaliza() { 
		aSocket.close();
	}

}